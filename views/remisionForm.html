{% include 'header.html' %}
<section class = "row">
    <h1 class="page-header text-center col-xs-12">{{session.action == 'create'?'Nueva Venta':session.action == 'update'?'Modificar Venta':'Detalles'}}</h1>
    <div class = "col-sm-offset-1 col-sm-10 col-lg-offset-2 col-lg-8">
    {% if session.action != 'list' %}
        <form id="formulario" role="form" class="" action="{{session.document_root}}/remision/api/{{session.action}}/" {%if session.action == "update" %}data-tolocation="{{session.document_root}}/remision/list/id/{{data.IDRemision}}"{% else %} data-tolocation="{{session.document_root}}/remision/list/" {% endif %} method="POST">
    {% endif %}
        {% if session.action != 'create' %}
            <div class="form-group col-md-6">
                <label for="idRemision">Id Venta:</label>
                <input class="form-control" type="text" id="idRemision" name="idRemision" value="{{data.IDRemision}}" readonly>
            </div>
        {% endif %}
        {% if session.action == 'list' %}
            <div class="form-group col-md-6">
                <label for="folio">Folio:</label>
                <input class="form-control" type="text" id="folio" name="folio" value="{{data.Folio}}" readonly>
            </div>
        {% endif %}
            <div class="form-group col-md-6">
                <label for="idCliente">Cliente:</label>
                <select data-url="{{session.document_root}}/cliente/api/list/activos" class="form-control" id = "idCliente" name = "idCliente" placeholder = "Cliente" value="{{data.IDCliente}}" data-selected="{{data.IDCliente}}" required {{session.action == 'list'?'disabled':''}}>
                    <option>Selecciona un cliente</option>
                </select>
            </div>
            <div class="form-group col-md-6">
                <label for="fechaRemision">Fecha de Venta:</label>
                <input class="form-control" type="text" data-type="date" name="fechaRemision" id="fechaRemision" placeholder="Fecha de Venta" value="{{data.FechaRemision}}" required {{session.action == 'list'?'disabled':''}}>
            </div>
            <div class="col-xs-3">
                <div class="form-group col-md-12">
                    <label for="listaProductos">Productos:</label>
                    <select size="6" data-url="{{session.document_root}}/producto/api/list/activos" class="form-control" multiple id="listaProductos" name="listaProductos" placeholder="Productos" {{session.action == 'list'?'disabled':''}}>
                    </select>
                </div>
                <div class="form-group col-xs-12">
                    <label for="iva">Iva (%):</label>
                    <input class="form-control" type="number" step="any" min="0" max="100" name="iva" id="iva" value="16" {{session.action == 'list'?'disabled':''}}>
                </div>
            </div>
            <div class="form-group col-md-9">
                <label>Productos Seleccionados:</label>
                <div class="table-responsive">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th></th>
                                <th>Id</th>
                                <th>Nombre</th>
                                <th>P. Unitario ($)</th>
                                <th>Cantidad</th>
                                <th>Descuento (%)</th>
                                <th>IVA (%)</th>
                                <th>Sub Total ($)</th>
                            </tr>
                        </thead>
                        <tbody id="productosContainer">
                            
                        </tbody>
                        <tfoot>
                            <tr>
                                <th colspan="7" class="text-right">Total:</th>
                                <th id="totalProductos"></th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            </div>
        {% if session.action != 'list' %}
            <div class = "col-xs-12 col-sm-12 col-md-12 col-lg-12">
                <button type="submit" class="btn btn-default pull-left">Enviar</button>
                <button type="reset" class="btn btn-default pull-right">Limpiar Campos</button>
            </div>
        </form>
        <div class="modal fade" id="modalCargar" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h4 class="modal-title text-center" id="myModalLabel">Cargando</h4>
                    </div>
                    <div class="modal-body text-center">
                        <span class="fa fa-spinner fa-spin fa-5x"></span>
                    </div>
                </div>
            </div>
        </div>
        {% endif %}
    </div>
</section>
{% include 'footer.html' with {'jsLibs': ['js/remision.js']}%}